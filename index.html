<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMO Tools - Exact Resolution</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        :root {
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #222;
        }
        .dark-theme {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #fff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; align-items: center; padding: 20px; }

        .header { width: 100%; max-width: 400px; display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; }
        .logo { color: #007bff; font-size: 24px; font-weight: bold; text-decoration: none; }

        /* Background Area (1840:3600 ratio ·ÄÄ·Ä≠·ÄØ base ·Äë·Ä¨·Ä∏·Åç 300px:587px ·Äñ·Äº·ÄÑ·Ä∑·Ä∫·Äï·Äº·Äû·Äû·Ää·Ä∫) */
        #capture-area {
            width: 300px; 
            height: 587px; 
            background: #e0e0e0; /* Background ·Ä°·Äõ·Ä±·Ä¨·ÄÑ·Ä∫ */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Phone Frame (1550:3600 ratio ·ÄÄ·Ä≠·ÄØ base ·Äë·Ä¨·Ä∏·Åç 252px:587px ·Äñ·Äº·ÄÑ·Ä∑·Ä∫·Äï·Äº·Äû·Äû·Ää·Ä∫) */
        .phone-mockup {
            width: 252px; 
            height: 587px; 
            background: #000;
            border: 6px solid #333;
            border-radius: 35px;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }

        #preview-img { width: 100%; height: 100%; object-fit: cover; display: none; }

        .card { background: var(--card-bg); width: 100%; max-width: 380px; border-radius: 25px; padding: 20px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .btn { width: 100%; padding: 15px; border-radius: 50px; border: none; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-select { background-color: #e7f0ff; color: #007bff; }
        .btn-download { background-color: #007bff; color: white; }
    </style>
</head>
<body>

    <header class="header">
        <div class="logo">DMO Tools</div>
        <i class="fas fa-sun" id="mode-btn" style="cursor:pointer;"></i>
    </header>

    <div class="card">
        <div id="capture-area">
            <div class="phone-mockup" id="phone-frame">
                <img id="preview-img" src="">
                <i class="fas fa-image" id="placeholder" style="color:#444; font-size:30px;"></i>
            </div>
        </div>

        <p style="font-size: 12px; margin-bottom: 15px;">Background: 1840x3600 | Phone: 1550x3600</p>

        <input type="file" id="file-in" accept="image/*" style="display:none;">
        <button class="btn btn-select" onclick="document.getElementById('file-in').click()">üì∏ Screenshot ·Äõ·ÄΩ·Ä±·Ä∏·Äô·Ää·Ä∫</button>
        <button class="btn btn-download" onclick="exportImage()">üíæ ·Äï·ÄØ·Ä∂·Äû·Ä≠·Äô·Ä∫·Ä∏·Äô·Ää·Ä∫</button>
    </div>

    <script>
        // Dark Mode
        document.getElementById('mode-btn').onclick = function() {
            document.body.classList.toggle('dark-theme');
            this.classList.toggle('fa-moon');
        };

        // Image Preview
        document.getElementById('file-in').onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const img = document.getElementById('preview-img');
                    img.src = event.target.result;
                    img.style.display = 'block';
                    document.getElementById('placeholder').style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        };

        // ·Äï·ÄØ·Ä∂·Äë·ÄØ·Äê·Ä∫·Äö·Ä∞·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ (High Resolution)
        async function exportImage() {
            if (!document.getElementById('preview-img').src) return alert("·Äï·ÄØ·Ä∂·Ä°·Äõ·ÄÑ·Ä∫·Äê·ÄÑ·Ä∫·Äï·Ä´");

            const area = document.getElementById('capture-area');
            const btn = document.querySelector('.btn-download');
            btn.innerText = "·Äû·Ä≠·Äô·Ä∫·Ä∏·Äî·Ä±·Äû·Ää·Ä∫...";

            // 1840 / 300 = 6.133 scale factor
            const canvas = await html2canvas(area, {
                width: 300,
                height: 587,
                scale: 6.133,
                useCORS: true,
                backgroundColor: null
            });

            const link = document.createElement('a');
            link.download = 'DMO_HighRes_Mockup.png';
            link.href = canvas.toDataURL("image/png");
            link.click();
            btn.innerText = "·Äï·ÄØ·Ä∂·Äû·Ä≠·Äô·Ä∫·Ä∏·Äô·Ää·Ä∫";
        }
    </script>
</body>
</html>
